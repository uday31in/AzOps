{
    "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "input": {
            "value": {
                "type": "Microsoft.Resources/deploymentScripts",
                "apiVersion": "2020-10-01",
                "name": "runCLI",
                "location": "northeurope",
                "kind": "AzureCLI",
                "identity": {
                    "type": "userAssigned",
                    "userAssignedIdentities": {
                        "/subscriptions/dddbadc2-9d31-43f4-a7e3-ae83c9da646a/resourceGroups/aks/providers/Microsoft.ManagedIdentity/userAssignedIdentities/aks-uai": {}
                    }
                },
                "properties": {
                    "forceUpdateTag": "16",
                    "AzCliVersion": "2.9.1",
                    "timeout": "PT10M",
                    "retentionInterval": "P1D",
                    "cleanupPreference": "OnExpiration",
                    "arguments": "kubectl get pods --all-namespaces -o json",
                    "primaryScriptUri" : "https://raw.githubusercontent.com/uday31in/AzOps/aks/AzOps/data/template/aks.sh",
                    "environmentVariables": [
                        {
                            "name": "AKS_CLUSTER_NAME",
                            "value": "uday"
                        },
                        {
                            "name": "AKS_CLUSTER_RESOURCE_GROUP_NAME",
                            "value": "aks"
                        }
                    ]
                }
            }
        }
    }
}